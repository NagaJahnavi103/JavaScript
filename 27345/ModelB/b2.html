<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI in Urban Management</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .chart-container {
            width: 800px;
            height: 400px;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <canvas id="radarChart"></canvas>
    </div>
    <div id="heatMapContainer" class="chart-container"></div>

    <script>
        // Data for the radar chart
        const radarData = {
            labels: ["Traffic Flow", "Crime Reduction", "Public Transport Efficiency", "Energy Consumption"],
            datasets: [{
                label: "Singapore",
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255, 99, 132, 1)',
                pointBackgroundColor: 'rgba(255, 99, 132, 1)',
                data: [20, 15, 0, 0]
            }, {
                label: "London",
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                pointBackgroundColor: 'rgba(54, 162, 235, 1)',
                data: [0, 0, 12, 0]
            }, {
                label: "Sydney",
                backgroundColor: 'rgba(255, 206, 86, 0.2)',
                borderColor: 'rgba(255, 206, 86, 1)',
                pointBackgroundColor: 'rgba(255, 206, 86, 1)',
                data: [0, 0, 0, 10]
            }]
        };

        const radarCtx = document.getElementById('radarChart').getContext('2d');
        const radarChart = new Chart(radarCtx, {
            type: 'radar',
            data: radarData,
            options: {
                scale: {
                    ticks: {
                        suggestedMin: 0,
                        suggestedMax: 30
                    }
                },
                plugins: {
                    legend: {
                        position: 'top'
                    }
                }
            }
        });

        // Data for the heat map
        const heatMapData = {
            Singapore: { lat: 1.3521, long: 103.8198, value: 5000 },
            London: { lat: 51.5074, long: -0.1278, value: 1000 },
            Sydney: { lat: -33.8688, long: 151.2093, value: 1000 }
        };

        const margin = {top: 20, right: 20, bottom: 30, left: 40},
              width = 800 - margin.left - margin.right,
              height = 400 - margin.top - margin.bottom;

        const svg = d3.select("#heatMapContainer")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left}, ${margin.top})`);

        const projection = d3.geoMercator()
            .center([103.8, 1.3]) // Centered around Singapore
            .scale(100) // Scale to fit the SVG
            .translate([width / 2, height / 2]);

        const path = d3.geoPath()
            .projection(projection);

        // Fetching a simple world map
        d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson").then(function(world) {
            svg.selectAll("path")
                .data(world.features)
                .enter()
                .append("path")
                .attr("d", path)
                .style("fill", "lightgray")
                .style("stroke", "white");

            // Adding heat map circles
            svg.selectAll("circle")
                .data(Object.values(heatMapData))
                .enter()
                .append("circle")
                .attr("cx", d => projection([d.long, d.lat])[0])
                .attr("cy", d => projection([d.long, d.lat])[1])
                .attr("r", d => d.value / 100) // Size by value
                .style("fill", "red")
                .style("opacity", 0.5);
        });
    </script>
</body>
</html>