<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Color Theory Fashion Generator</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
<style>
    body { font-family: 'Arial', sans-serif; background: #f0f0f0; }
    .container { max-width: 900px; margin: 30px auto; padding: 20px; background: #fff; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .controls, .palette, .outfit-suggestion { margin-bottom: 20px; }
    .color-box { width: 100px; height: 100px; margin: 10px; display: inline-block; border: 1px solid #ccc; }
    select, button { padding: 10px; margin: 10px 0; }
    #contrastInfo { margin-top: 10px; font-size: 0.9em; color: #666; }
</style>
</head>
<body>

<div class="container">
    <h2>Color Theory Fashion Generator</h2>
    <div class="controls">
        <input type="color" id="baseColor" value="#0000ff">
        <select id="harmonyType">
            <option value="monochromatic">Monochromatic</option>
            <option value="complementary" selected>Complementary</option>
            <option value="triadic">Triadic</option>
            <!-- Add more options as needed -->
        </select>
        <button onclick="generatePalette()">Generate Palette</button>
    </div>
    
    <div id="palette" class="palette"></div>
    
    <div id="outfitSuggestions" class="outfit-suggestion"></div>
    
    <div id="contrastInfo"></div>
</div>

<script>
function generatePalette() {
    const baseColor = document.getElementById('baseColor').value;
    const harmony = document.getElementById('harmonyType').value;
    const palette = [];
    
    // Function to calculate different harmonies
    function calculateHarmony(base, type) {
        const baseRGB = hexToRGB(base);
        const baseHSL = RGBToHSL(baseRGB.r, baseRGB.g, baseRGB.b);
        
        switch(type) {
            case 'monochromatic':
                return [base, HSLToHex(baseHSL.h, baseHSL.s, 70), HSLToHex(baseHSL.h, baseHSL.s, 30)];
            case 'complementary':
                let compHue = (baseHSL.h + 180) % 360;
                return [base, HSLToHex(compHue, baseHSL.s, baseHSL.l)];
            case 'triadic':
                let hue1 = (baseHSL.h + 120) % 360;
                let hue2 = (baseHSL.h + 240) % 360;
                return [base, HSLToHex(hue1, baseHSL.s, baseHSL.l), HSLToHex(hue2, baseHSL.s, baseHSL.l)];
            // Add more harmony types here
        }
    }
    
    // Generate the palette based on harmony
    palette.push(...calculateHarmony(baseColor, harmony));
    
    // Display palette
    const paletteDiv = document.getElementById('palette');
    paletteDiv.innerHTML = '';
    palette.forEach(color => {
        const div = document.createElement('div');
        div.className = 'color-box';
        div.style.backgroundColor = color;
        div.onclick = () => checkContrast(baseColor, color);
        paletteDiv.appendChild(div);
    });
    
    // Outfit suggestions could be added here
    suggestOutfits(palette);
}

function hexToRGB(hex) {
    let r = parseInt(hex.slice(1, 3), 16),
        g = parseInt(hex.slice(3, 5), 16),
        b = parseInt(hex.slice(5, 7), 16);
    return {r, g, b};
}

function RGBToHSL(r, g, b) {
    // Convert RGB to HSL
    r /= 255, g /= 255, b /= 255;
    let max = Math.max(r, g, b), min = Math.min(r, g, b);
    let h, s, l = (max + min) / 2;

    if(max == min){
        h = s = 0; // achromatic
    } else {
        let d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch(max){
            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
            case g: h = (b - r) / d + 2; break;
            case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
    }
    return {h: h * 360, s: s * 100, l: l * 100};
}

function HSLToHex(h, s, l) {
    // Convert HSL back to hex
    l /= 100;
    const a = s * Math.min(l, 1 - l) / 100;
    const f = n => {
        const k = (n + h / 30) % 12;
        const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
        return Math.round(255 * color).toString(16).padStart(2, '0');
    };
    return `#${f(0)}${f(8)}${f(4)}`;
}

function checkContrast(color1, color2) {
    const luminance = (r, g, b) => {
        const a = [r, g, b].map(v => {
            v /= 255;
            return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
        });
        return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
    };
    
    const l1 = luminance(...Object.values(hexToRGB(color1)));
    const l2 = luminance(...Object.values(hexToRGB(color2)));
    
    const ratio = (Math.max(l1, l2) + 0.05) / (Math.min(l1, l2) + 0.05);
    document.getElementById('contrastInfo').textContent = `Contrast Ratio: ${ratio.toFixed(2)}:1`;
}

function suggestOutfits(palette) {
    // Placeholder for outfit suggestions based on palette colors
    const items = ['shirt', 'trousers', 'dress', 'shoes', 'hat'];
    const suggestions = palette.map((color, i) => `<p>Try a ${items[i]} in ${color}</p>`).join('');
    document.getElementById('outfitSuggestions').innerHTML = suggestions;
}

// Initial generation
generatePalette();
</script>

</body>
</html>