<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Color Palette Generator for Outfits</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
<style>
  body { font-family: 'Roboto', sans-serif; }
  .container { max-width: 800px; margin: auto; padding: 20px; }
  .color-input { width: 100%; height: 40px; border: none; padding: 10px; box-sizing: border-box; }
  .palette { display: flex; justify-content: space-around; padding: 20px; }
  .color-block { width: 100%; height: 50px; margin: 10px; }
  .outfit-suggestions { padding: 20px; }
  .shopping-links a { text-decoration: none; color: #007BFF; padding: 5px; }
</style>
</head>
<body>
<div class="container">
  <input type="color" id="base-color" value="#ffffff" class="color-input">
  <h2>Generated Palettes</h2>
  <div class="palette" id="complementary">
    <h3>Complementary</h3>
  </div>
  <div class="palette" id="analogous">
    <h3>Analogous</h3>
  </div>
  <div class="outfit-suggestions">
    <h2>Outfit Suggestions</h2>
    <p id="suggestions-text"></p>
  </div>
  <div class="shopping-links" id="shopping-links">
    <h2>Shopping Links</h2>
  </div>
</div>

<script>
  const baseColorInput = document.getElementById('base-color');
  const complementaryPalette = document.getElementById('complementary');
  const analogousPalette = document.getElementById('analogous');
  const suggestionsText = document.getElementById('suggestions-text');
  const shoppingLinksContainer = document.getElementById('shopping-links');

  baseColorInput.addEventListener('input', generatePalettes);

  function generatePalettes(e) {
    const baseColor = e.target.value;
    const complementaryColor = getComplementaryColor(baseColor);
    const analogousColors = getAnalogousColors(baseColor);

    displayPalette(complementaryPalette, [complementaryColor]);
    displayPalette(analogousPalette, analogousColors);

    const outfitSuggestions = getOutfitSuggestions(baseColor, complementaryColor, analogousColors);
    suggestionsText.innerText = outfitSuggestions;

    const shoppingItems = getShoppingLinks(outfitSuggestions);
    populateShoppingLinks(shoppingLinksContainer, shoppingItems);
  }

  function getComplementaryColor(hex) {
    const color = hex.replace(/^#/, '');
    const r = parseInt(color.substr(0,2),16);
    const g = parseInt(color.substr(2,2),16);
    const b = parseInt(color.substr(4,2),16);
    return `#${((255-r).toString(16).padStart(2, '0'))}${(255-g).toString(16).padStart(2, '0')}${(255-b).toString(16).padStart(2, '0')}`;
  }

  function getAnalogousColors(hex, offset=30) {
    const hsl = hexToHSL(hex);
    const analogousColors = [];
    for (let i = -1; i <= 1; i++) {
      let newHue = hsl.h + i * offset;
      if (newHue < 0) newHue += 360;
      if (newHue > 360) newHue -= 360;
      analogousColors.push(`hsl(${newHue}, ${hsl.s}%, ${hsl.l}%)`);
    }
    return analogousColors;
  }

  function hexToHSL(hex) {
    // Convert hex to RGB first
    let r = parseInt(hex.substr(1,2), 16) / 255;
    let g = parseInt(hex.substr(3,2), 16) / 255;
    let b = parseInt(hex.substr(5,2), 16) / 255;
    // Then to HSL
    let cmin = Math.min(r,g,b),
        cmax = Math.max(r,g,b),
        delta = cmax - cmin,
        h = 0, s = 0, l = 0;
    
    if (delta == 0) h = 0;
    else if (cmax == r) h = ((g - b) / delta) % 6;
    else if (cmax == g) h = (b - r) / delta + 2;
    else h = (r - g) / delta + 4;

    h = Math.round(h * 60);
    if (h < 0) h += 360;
    l = (cmax + cmin) / 2;
    s = delta == 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));
    s = +(s * 100).toFixed(1);
    l = +(l * 100).toFixed(1);

    return {h: h, s: s, l: l};
  }

  function displayPalette(element, colors) {
    element.innerHTML = '';
    colors.forEach(color => {
      const div = document.createElement('div');
      div.style.backgroundColor = color;
      div.className = "color-block";
      element.appendChild(div);
    });
  }

  function getOutfitSuggestions(base, comp, analogous) {
    return `Try a base outfit in ${base} with accessories in ${comp} or mix in some ${analogous.join(', ')}.`;
  }

  function getShoppingLinks(suggestions) {
    // This would ideally query an API or database for real products
    return suggestions.split(' ').map(word => ({ name: word, link: `https://example.com/search?q=${word}` }));
  }

  function populateShoppingLinks(container, items) {
    container.innerHTML = '';
    items.forEach(item => {
      const a = document.createElement('a');
      a.href = item.link;
      a.innerText = `Shop for ${item.name}`;
      container.appendChild(a);
    });
  }
</script>
</body>
</html>