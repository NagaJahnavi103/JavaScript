<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Donation Tracker</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<style>
    body { font-family: 'Arial', sans-serif; }
    .widget-container { margin: 20px; }
    .fund-item { margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
    .progress { margin-top: 10px; }
    .thumbnail { max-width: 100px; }
</style>
</head>
<body>

<div class="widget-container">
    <button class="btn btn-primary" data-toggle="modal" data-target="#addFundModal">Add Fundraising Item</button>
    <div id="fundList"></div>
</div>

<!-- Modals -->
<div class="modal fade" id="addFundModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Fundraising Item</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="fundForm">
                    <input type="text" class="form-control" id="fundName" placeholder="Name" required>
                    <textarea class="form-control" id="fundDescription" placeholder="Description"></textarea>
                    <input type="number" class="form-control" id="fundGoal" placeholder="Goal in USD" required>
                    <input type="file" id="fundImage" accept="image/*">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="addFundItem()">Save</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="contributeModal" tabindex="-1" role="dialog">
    <!-- Contribution modal content similar to above -->
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    loadFundItems();

    // Function to add a new fund item
    window.addFundItem = function() {
        const name = document.getElementById('fundName').value;
        const description = document.getElementById('fundDescription').value;
        const goal = document.getElementById('fundGoal').value;
        const imageFile = document.getElementById('fundImage').files[0];
        let imageUrl = ''; // Placeholder for image URL

        if (imageFile) {
            // Here you would typically upload the image to a server and get a URL
            // For simplicity, we'll use a mock URL
            imageUrl = URL.createObjectURL(imageFile);
        }

        const fundItem = {
            name: name,
            description: description,
            goal: parseFloat(goal),
            current: 0,
            image: imageUrl,
            contributors: []
        };

        let funds = JSON.parse(localStorage.getItem('funds') || '[]');
        funds.push(fundItem);
        localStorage.setItem('funds', JSON.stringify(funds));

        $('#addFundModal').modal('hide');
        loadFundItems();
    };

    // Function to display fund items
    function loadFundItems() {
        const fundList = document.getElementById('fundList');
        fundList.innerHTML = '';
        const funds = JSON.parse(localStorage.getItem('funds') || '[]');
        if(funds.length === 0) {
            fundList.innerHTML = '<p>No fundraising items yet. Add one!</p>';
        }
        funds.forEach((fund, index) => {
            const div = document.createElement('div');
            div.className = 'fund-item';
            div.innerHTML = `
                <img src="${fund.image}" class="thumbnail" alt="${fund.name}">
                <h4>${fund.name}</h4>
                <p>Goal: $${fund.goal}</p>
                <button class="btn btn-info" onclick="contribute(${index})">Contribute</button>
                <button class="btn btn-secondary" onclick="viewDetails(${index})">View Details</button>
            `;
            fundList.appendChild(div);
        });
    }

    // Placeholder for contribution and view details
    window.contribute = function(index) {
        // Implement modal for contribution
        console.log('Contribute to fund at index:', index);
    };

    window.viewDetails = function(index) {
        // Redirect or show more details
        console.log('View details for fund at index:', index);
    };
});
</script>

</body>
</html>